---
layout: post
title: "CGI"
date: "2017-05-06 04:21:39 +0800"
---

# LAMP: Understand CGI

Before getting started with the following steps, we'd have installed Apache.

### Enable CGI support (FIXME)
on Ubuntu:
```
$ sudo a2enmod cgi (or cgid)
```

and finally, restart Apache:
```
$ sudo systemctl restart httpd (or apache2) # for Linux
$ sudo apachectl restart # for macOS
```

### Create CGI demo(s)

Perl (demo.pl)

```perl
#!/usr/bin/env perl -w

print "Content-type:text/html\n\n";

my $now = localtime();

print "<h1>$now</h1>";
```

Python (demo.py)

```python
#!/usr/bin/env python

import time

print "Content-type:text/html\n"

now = time.asctime(time.localtime(time.time()))

print "<h1>%s</h1>" % now
```

Ruby (demo.rb)

```ruby
#!/usr/bin/env ruby

puts "Content-type:text/html\n\n"

now = Time.new
puts "<h1>" + now.inspect + "</h1>"
```

### Upload the demo(s)
find the cgi-bin path:
```
$ grep cgi-bin -R /etc/httpd (or /etc/apache2)
ScriptAlias /cgi-bin/ "/var/www/cgi-bin/" (possible output)
```

and then copy the demo(s) to cgi-bin:
```
$ sudo cp -v demo.pl demo.py demo.rb /path/to/cgi-bin/
```

### Test
```
$ firefox http://localhost/cgi-bin/demo.pl (or .py, .rb)
```

### Done.


### 3.3. WSGI

which one is better?

```python
from helloworld.wsgi import HelloWorldApplication
application = HelloWorldApplication(application)
```

```python
def application(env, start_response):
    start_response('200 OK', [('Content-Type','text/html')])
    return [b"Demo"] # py3
```

double check??
